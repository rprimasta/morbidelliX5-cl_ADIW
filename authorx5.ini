# Generated by stepconf 1.1 at Tue Dec 11 10:31:37 2018
# If you make changes to this file, they will be
# overwritten when you run stepconf again

[EMC]
MACHINE = authorx5
DEBUG = 0

[DISPLAY]
DISPLAY = gscreen


EDITOR = mousepad
POSITION_OFFSET = RELATIVE
POSITION_FEEDBACK = ACTUAL
ARCDIVISION = 64
GRIDS = 10mm 20mm 50mm 100mm 1in 2in 5in 10in
MAX_FEED_OVERRIDE = 1.2
MIN_SPINDLE_OVERRIDE = 0.5
MAX_SPINDLE_OVERRIDE = 1.2
DEFAULT_LINEAR_VELOCITY = 25.00
MIN_LINEAR_VELOCITY = 0
MAX_LINEAR_VELOCITY = 150.00
DEFAULT_ANGULAR_VELOCITY = 36.00
MIN_ANGULAR_VELOCITY = 0
MAX_ANGULAR_VELOCITY = 100.00
INTRO_GRAPHIC = AUTHORX5.gif
INTRO_TIME = 0
PROGRAM_PREFIX = /home/author/linuxcnc/nc_files
INCREMENTS = .1mm .05mm .01mm .005mm .001mm .0005mm .0001mm
EMBED_TAB_NAME = Double Table
EMBED_TAB_LOCATION = notebook_mode
EMBED_TAB_COMMAND = gladevcp -x {XID} -H ./ui/dtab.hal -t HighContrastInverse -u ./ui/dtab-r3.py ./ui/dtab.ui



#PYVCP = custompanel.xml
#GLADEVCP= -c gladevcp -u ./ui/operation_menu.py ./ui/operation_menu.ui
#EMBED_TAB_NAME=Operation Menu
#EMBED_TAB_COMMAND=gladevcp -c gladevcp2 -x {XID} -u ./ui/operation_menu.py -H ./ui/operation_menu.hal ./ui/operation_menu.ui
#EMBED_TAB_NAME = Operation Menu
#EMBED_TAB_LOCATION = vcp_box
#EMBED_TAB_COMMAND = gladevcp -x {XID} -t Redmond ./ui/operation_menu.ui


[FILTER]
PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image
PROGRAM_EXTENSION = .py Python Script
png = image-to-gcode
gif = image-to-gcode
jpg = image-to-gcode
py = python

[PYTHON]
# where to find Python code:
# code specific for this configuration
PATH_PREPEND=./python
# generic support code
PATH_APPEND=./python

# import the following Python module
TOPLEVEL=./python/toplevel.py


[TASK]
TASK = milltask
CYCLE_TIME = 0.010

[RS274NGC]
FEATURES=12
PARAMETER_FILE = linuxcnc.var
USER_M_PATH = ./macros
SUBROUTINE_PATH = ./macros
ON_ABORT_COMMAND=O <on_abort> call

REMAP=T  prolog=prepare_prolog epilog=prepare_epilog ngc=prepare
#REMAP=G73.1  modalgroup=1 argspec=xyzqplr prolog=cycle_prolog ngc=g731 epilog=cycle_epilog
REMAP=M6   modalgroup=6  prolog=change_prolog ngc=change epilog=change_epilog
REMAP=M248 modalgroup=10 ngc=m248
REMAP=M249 modalgroup=10 ngc=m249
REMAP=M250 modalgroup=10 ngc=m250
REMAP=M251 modalgroup=10 ngc=m251

REMAP=M289 modalgroup=10 argspec=P ngc=m289
REMAP=G52 modalgroup=1 argspec=Pxyz ngc=m205
REMAP=M299 modalgroup=10 ngc=m299
REMAP=M300 modalgroup=10 ngc=m300
REMAP=M301 modalgroup=10 ngc=m301
REMAP=M334 modalgroup=10 ngc=m334
REMAP=M335 modalgroup=10 ngc=m335
REMAP=M400 modalgroup=10 ngc=m400
REMAP=M401 modalgroup=10 ngc=m401
REMAP=M430 modalgroup=10 ngc=m430
REMAP=M431 modalgroup=10 ngc=m431
REMAP=M432 modalgroup=10 ngc=m432
REMAP=M433 modalgroup=10 ngc=m433

REMAP=M600 modalgroup=10 ngc=m600
REMAP=M699 modalgroup=10 ngc=m699


[EMCMOT]
EMCMOT = motmod
COMM_TIMEOUT = 1.0
COMM_WAIT = 0.010
#BASE_PERIOD = 26500

#BASE_PERIOD = 35000
#30854
SERVO_PERIOD = 1000000

[HAL]
HALUI = halui
HALFILE = 7i77.hal
HALFILE = authorx5.hal
HALFILE = PLC.hal
HALFILE = param.hal
HALFILE = alarm.hal
HALFILE = xhc-hb04.hal
POSTGUI_HALFILE = custom_postgui.hal


[HALUI]
# add halui MDI commands here (max 64) 
MDI_COMMAND = O<startup> CALL
MDI_COMMAND = O<m336> CALL
MDI_COMMAND = O<m337> CALL
MDI_COMMAND = O<m338> CALL
#MDI_COMMAND = G91G28Z0.
MDI_COMMAND = M300
MDI_COMMAND = M299
[TRAJ]
AXES = 6
COORDINATES = X Y Z B C
LINEAR_UNITS = mm
ANGULAR_UNITS = degree
CYCLE_TIME = 0.010
DEFAULT_VELOCITY = 50.00
MAX_LINEAR_VELOCITY = 666.66
MAX_ANGULAR_VELOCITY = 55.
NO_FORCE_HOMING = 1
ARC_BLEND_ENABLE = 0
POSITION_FILE = position.txt
#ARC_BLEND_FALLBACK_ENABLE = 1

[EMCIO]
EMCIO = io
CYCLE_TIME = 0.100
TOOL_TABLE = tool.tbl

#### the axis values need to be updated to your machine

[AXIS_0]
TYPE =                  LINEAR
MAX_VELOCITY =          490.0
MAX_ACCELERATION =      1500.0
BACKLASH =              0.000
FERROR =                1.
MIN_FERROR =            0.06

# put how many pulses from the encoder per inch here
INPUT_SCALE =           -3276.9108
#-3267.97382 
#-3333.3333
OUTPUT_OFFSET =         0.0
OUTPUT_SCALE = 1.
OUTPUT_MIN_LIMIT = -10.0
OUTPUT_MAX_LIMIT = 10.0

MIN_LIMIT =             -9999.0
MAX_LIMIT =             99999

#MIN_LIMIT =             -10.0
#MAX_LIMIT =             4968.3
#HOME =                  0.000
HOME_OFFSET =            0.
HOME_SEARCH_VEL =       15.0
HOME_LATCH_VEL =        0.8
# the X axis encoder has an index channel, so we use it to improve the home accuracy
HOME_USE_INDEX =        YES
#HOME_IGNORE_LIMITS =    YES
HOME_SEQUENCE = 1

# PID tuning params
DEADBAND =              0.0015 
P =                     4.
I =                     0.8
D =                     0.00
FF0 =                   0.000
FF1 =                   0.02
FF2 =			0.00005
BIAS =                  0.000

[AXIS_1]
TYPE =                  LINEAR
MAX_VELOCITY =          570.0
MAX_ACCELERATION =      1500.0
BACKLASH =              0.010
FERROR =                1.
MIN_FERROR =            0.06

# put how many pulses from the encoder per inch here
INPUT_SCALE =           -4369.3901
#-4356.2819608385
#-4416.1808378 
#-3333.3333
OUTPUT_OFFSET =         0.0
OUTPUT_SCALE = 1.
OUTPUT_MIN_LIMIT = -10.0
OUTPUT_MAX_LIMIT = 10.0

MIN_LIMIT =             -99999
MAX_LIMIT =             99999
#MIN_LIMIT =             -1339.6
#MAX_LIMIT =             61.720

#HOME =                  0.000
HOME_OFFSET =            -0.0
HOME_SEARCH_VEL =       -15.0
HOME_LATCH_VEL =        -0.8
# the Y axis encoder has an index channel, so we use it to improve the home accuracy
HOME_USE_INDEX =        YES
#HOME_IGNORE_LIMITS =    YES
HOME_SEQUENCE = 1

# PID tuning params
DEADBAND =              0.0015 
P =                     4.0
I =                     0.8
D =                     0.00
FF0 =                   0.000
FF1 =                   0.017
FF2 =			0.00005
BIAS =                  0.000

[AXIS_2]
TYPE =                  LINEAR
MAX_VELOCITY =          250.0
MAX_ACCELERATION =      1500.0
BACKLASH =              0.00
FERROR =                1.
MIN_FERROR =            0.06

# put how many pulses from the encoder per inch here
INPUT_SCALE =         -8750.3815  
#-8744.912550099 
#-3333.3333
OUTPUT_OFFSET =         0.0
OUTPUT_SCALE = 1.
OUTPUT_MIN_LIMIT = -10.0
OUTPUT_MAX_LIMIT = 10.0

MIN_LIMIT =             -370.000
MAX_LIMIT =             5.
#HOME =                  0.000
HOME_OFFSET =            0.
HOME_SEARCH_VEL =       -10.0
HOME_LATCH_VEL =        0.8
# the Z axis encoder has an index channel, so we use it to improve the home accuracy
HOME_USE_INDEX =        YES
#HOME_IGNORE_LIMITS =    YES
HOME_SEQUENCE = 0

# PID tuning params
DEADBAND =              0.0015 
P =                     4.0
I =                     0.8
D =                     0.00
FF0 =                   0.000
FF1 =                   0.032
FF2 =			0.00005
BIAS =                  0.000


[AXIS_4]
TYPE =                  ANGULAR
MAX_VELOCITY =          55.0
MAX_ACCELERATION =      750.0
BACKLASH =              0.00
FERROR =                1.
MIN_FERROR =            0.2

# put how many pulses from the encoder per inch here
INPUT_SCALE =		-3450.3537         
#-3448.0509/0.08
#-3449.3302690769
#-3450.0981520397
#-3448.818062194 
#-3333.3333
OUTPUT_OFFSET =         0.0
OUTPUT_SCALE = 1.
OUTPUT_MIN_LIMIT = -10.0
OUTPUT_MAX_LIMIT = 10.0

MIN_LIMIT =             -190.000
MAX_LIMIT =             190.000
#HOME =                  0.000
HOME_OFFSET =            -86.874
#-88.294
#-88.174-0.12
#-87.986
HOME_USE_INDEX =        YES
HOME_SEARCH_VEL =       7.50
HOME_LATCH_VEL =        0.1

# the B axis encoder has an index channel, so we use it to improve the home accuracy
#HOME_USE_INDEX =        YES
#HOME_IGNORE_LIMITS =    YES
HOME_SEQUENCE = 2

# PID tuning params
DEADBAND =              0.00015 
P =                     2.
I =                     0.0
D =                     0.2
FF0 =                   0.0
FF1 =                   0.052
FF2 =			0.00
BIAS =                  0.000

[AXIS_5]
TYPE =                  ANGULAR
MAX_VELOCITY =          55.0
MAX_ACCELERATION =      1500.0
BACKLASH =              0.00
FERROR =                0.06
MIN_FERROR =            0.04

# put how many pulses from the encoder per inch here
INPUT_SCALE =           -27576.557
#-27705.082
#-27640.745 / 89.791
#-27609.203759292
#-27594.327
#-27586.789117884
#-3448.818062194  
#-3333.3333
OUTPUT_OFFSET =         0.0
OUTPUT_SCALE = 1.
OUTPUT_MIN_LIMIT = -10.0
OUTPUT_MAX_LIMIT = 10.0

MIN_LIMIT =             -360.000
MAX_LIMIT =             360.500
HOME =                  180.000
HOME_OFFSET =            -311.02921
#-312.60921-1.58
#-312.58591
#-315.00
#-135.
HOME_USE_INDEX =        YES
HOME_SEARCH_VEL =       7.50
HOME_LATCH_VEL =        0.1
# the C axis encoder has an index channel, so we use it to improve the home accuracy
#HOME_USE_INDEX =        YES
#HOME_IGNORE_LIMITS =    YES
HOME_SEQUENCE = 3

# PID tuning params
DEADBAND =              0.00015 
P =                     20.0
I =                     0.0
D =                     0.0000
FF0 =                   0.000
FF1 =                   0.17
FF2 =			0.00000
BIAS =                  0.000

#==================TOOLCHANGE PARAMETER======================
[ATC]
POC_Y = 55.463
#56.453
#53.437	
POC_Z =  -370.
#-369.825
#-364.628
RETRACT_Z = 52.4
FEEDRATE = 2500
NUMSLOT = 12
CLAMP_MAXRETRY = 3
UNCLAMP_MAXRETRY = 3

#===================TABLE PARAMETER===========================
[DTABLE]
DATUM_X_AB = 253.659
#254.195
#247.971
DATUM_Y_AB = -112.539
#-113.529
#-115.14
DATUM_Z_AB = -325.677
#-322.48
#-322.8000

DATUM_X_CD = 2593.401
#2593.726
#2589.251
DATUM_Y_CD = -112.725
#-113.529
DATUM_Z_CD = -325.677
#-322.48

#===================DHOOD PARAMETER===========================
[DHOOD]
ENABLE = 1
FREE_POS = 7.00
RET_POS = 0.00
